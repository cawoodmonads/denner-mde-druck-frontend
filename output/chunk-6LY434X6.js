import{a as P,b as E,c as oe,d as re,e as k,g as ae,h as V,i as le,j as ce}from"./chunk-7LHUVU6W.js";import{$ as D,A as B,H as j,I as J,J as K,K as S,P as y,Q as L,R as T,S as A,T as W,U as G,V as R,W as $,X as U,Y as X,Z as Y,_ as Z,aa as ee,b as w,ba as te,c as u,ca as ne,d,e as v,ea as O,f as q,fa as ie,g as I,h as c,i as M,j as C,k as x,l as _,m as N,n as Q,o as a,p as l,q as p,r as f,s as g,t as m,u as s,v as b,w as h,x as z,y as H,z as F}from"./chunk-E3OMEZQI.js";import"./chunk-QGABI5HO.js";import"./chunk-V4S6F4OC.js";import"./chunk-VNUFBONC.js";import"./chunk-6QZEPTT7.js";import"./chunk-F7XBNY6P.js";import"./chunk-JX3TYZ34.js";import"./chunk-RUY5SX76.js";import"./chunk-NIOQNOHM.js";import"./chunk-4U6PRYVA.js";import"./chunk-6BZ4INXC.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import"./chunk-RW4GY4BD.js";function de(t,n){if(t&1){let i=f();a(0,"ion-row",0)(1,"ion-col",1)(2,"b"),s(3),l(),p(4,"br"),s(5),p(6,"br"),a(7,"ion-note"),s(8),l()(),a(9,"ion-col",2),s(10),l(),a(11,"ion-col",3)(12,"ion-button",4),g("click",function(){u(i);let e=m();return d(e.queueMaterial())}),p(13,"ion-icon",5),l()()()}if(t&2){let i=m();c(3),b(i.material().materialNo),c(2),h(" ",i.material().description," "),c(3),b(i.material().unit),c(2),h("CHF ",i.material().price,"")}}var me=(()=>{let n=class n{isIos(){return this.platform.is("ios")}constructor(){this.queue=v(),this.platform=w(S),this.material=q.required(),P({chevronForward:k,addCircleOutline:E,removeCircleOutline:V,bagAddOutline:oe})}incrementQty(){this.material().quantity++}decrementQty(){this.material().quantity<=1||this.material().quantity--}queueMaterial(){this.queue.emit(this.material())}};n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=M({type:n,selectors:[["app-material"]],inputs:{material:[1,"material"]},outputs:{queue:"queue"},decls:1,vars:1,consts:[[1,"ion-align-items-start"],["size","9"],["size","2"],["size","1"],["size","large",3,"click"],["slot","icon-only","name","bag-add-outline"]],template:function(e,o){e&1&&C(0,de,14,4,"ion-row",0),e&2&&_(o.material()?0:-1)},dependencies:[Z,O,y,D,T],styles:["ion-item[_ngcontent-%COMP%]{--padding-start: 0;--inner-padding-end: 0}ion-label[_ngcontent-%COMP%]{margin-top:12px;margin-bottom:12px}ion-item[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:600;margin:0;display:flex;flex-wrap:wrap;justify-content:space-between}ion-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap;width:95%}ion-item[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{align-items:center;display:flex}ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#c9c9ca}ion-item[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{font-size:.9375rem;margin-right:8px;font-weight:400}ion-item[_ngcontent-%COMP%]   ion-note.md[_ngcontent-%COMP%]{margin-right:14px}.dot[_ngcontent-%COMP%]{display:block;height:12px;width:12px;border-radius:50%;align-self:start;margin:16px 10px 16px 16px}.dot-unread[_ngcontent-%COMP%]{background:var(--ion-color-primary)}ion-footer[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{font-size:11px;font-weight:400}span.qty[_ngcontent-%COMP%]{padding:5px;margin:10px}"],changeDetection:0});let t=n;return t})();function ge(t,n){if(t&1){let i=f();a(0,"ion-row",0)(1,"ion-col",1),s(2),p(3,"br"),s(4),l(),a(5,"ion-col",2)(6,"ion-button",3),g("click",function(){u(i);let e=m();return d(e.decrementQty())}),p(7,"ion-icon",4),l(),a(8,"span",5),s(9),l(),a(10,"ion-button",3),g("click",function(){u(i);let e=m();return d(e.incrementQty())}),p(11,"ion-icon",6),l()(),a(12,"ion-col",7)(13,"ion-button",8),g("click",function(){u(i);let e=m();return d(e.unqueueMaterial())}),p(14,"ion-icon",9),l()()()}if(t&2){let i=m();c(2),h(" ",i.material().materialNo," "),c(2),h(" ",i.material().description," "),c(5),b(i.material().quantity)}}var pe=(()=>{let n=class n{isIos(){return this.platform.is("ios")}constructor(){this.unqueue=v(),this.platform=w(S),this.material=q.required(),P({chevronForward:k,addCircleOutline:E,removeCircleOutline:V,trashOutline:le})}incrementQty(){this.material().quantity++}decrementQty(){this.material().quantity<=1||this.material().quantity--}unqueueMaterial(){this.unqueue.emit(this.material())}};n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=M({type:n,selectors:[["app-queue-material"]],inputs:{material:[1,"material"]},outputs:{unqueue:"unqueue"},decls:1,vars:1,consts:[[1,"ion-align-items-start"],["size","9"],["size","2",1,"ion-text-nowrap"],["shape","round","fill","clear","size","default",3,"click"],["slot","icon-only","name","remove-circle-outline"],[1,"qty"],["slot","icon-only","name","add-circle-outline"],["size","1"],["size","large","color","danger",3,"click"],["slot","icon-only","name","trash-outline"]],template:function(e,o){e&1&&C(0,ge,15,3,"ion-row",0),e&2&&_(o.material()?0:-1)},dependencies:[O,y,D,T],styles:["ion-item[_ngcontent-%COMP%]{--padding-start: 0;--inner-padding-end: 0}ion-label[_ngcontent-%COMP%]{margin-top:12px;margin-bottom:12px}ion-item[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:600;margin:0;display:flex;flex-wrap:wrap;justify-content:space-between}ion-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap;width:95%}ion-item[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{align-items:center;display:flex}ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#c9c9ca}ion-item[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{font-size:.9375rem;margin-right:8px;font-weight:400}ion-item[_ngcontent-%COMP%]   ion-note.md[_ngcontent-%COMP%]{margin-right:14px}.dot[_ngcontent-%COMP%]{display:block;height:12px;width:12px;border-radius:50%;align-self:start;margin:16px 10px 16px 16px}.dot-unread[_ngcontent-%COMP%]{background:var(--ion-color-primary)}ion-footer[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{font-size:11px;font-weight:400}span.qty[_ngcontent-%COMP%]{padding:3px;margin:5px}ion-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%}"],changeDetection:0});let t=n;return t})();var ue=(t,n)=>n.materialNo;function _e(t,n){t&1&&p(0,"ion-spinner",10)}function fe(t,n){t&1&&s(0," No materials found ")}function he(t,n){if(t&1){let i=f();a(0,"app-material",13),g("queue",function(e){u(i);let o=m(2);return d(o.queueMaterial(e))}),l()}if(t&2){let i=n.$implicit;x("material",i)}}function Ce(t,n){if(t&1){let i=f();a(0,"ion-list")(1,"ion-item")(2,"ion-searchbar",11),F("ngModelChange",function(e){u(i);let o=m();return H(o.searchTerm,e)||(o.searchTerm=e),d(e)}),g("ionInput",function(){u(i);let e=m();return d(e.loadMaterials())}),l()(),a(3,"ion-grid",12),N(4,he,1,1,"app-material",9,ue),l()()}if(t&2){let i=m();c(2),x("debounce",500),z("ngModel",i.searchTerm),c(2),Q(i.materials())}}function xe(t,n){t&1&&s(0," Druckwarteschlange ist leer ")}function we(t,n){if(t&1){let i=f();a(0,"app-queue-material",14),g("unqueue",function(e){u(i);let o=m();return d(o.unqueueMaterial(e))}),l()}if(t&2){let i=n.$implicit;x("material",i)}}var We=(()=>{let n=class n{constructor(){this.data=w(ce),this.lastKeyDown=new Date,this.spinning=I(!1),this.materials=I([]),this.printQueue=I([]),this.searchTerm=I(""),P({barcodeOutline:re,printOutline:ae}),this.spinning.set(!0),this.loadMaterials();let r=this.focusSearchBar.bind(this);setInterval(r,5e3),window.addEventListener("keydown",this.registerKeyDown.bind(this)),window.addEventListener("load",r)}focusSearchBar(){if(new Date().getTime()-this.lastKeyDown.getTime()<5e3)return;document.querySelector("#searchbar input").focus()}registerKeyDown(r){this.lastKeyDown=new Date}loadMaterials(){this.spinning.set(!0),this.data.getMaterials(this.searchTerm()).then(r=>{this.spinning.set(!1),this.materials.set(r)})}unqueueMaterial(r){this.printQueue.update(e=>(e=e.filter(o=>o.materialNo!==r.materialNo),JSON.parse(JSON.stringify(e))))}queueMaterial(r){let e=this.printQueue().find(o=>o.materialNo===r.materialNo);e?(e.quantity++,this.printQueue.update(o=>JSON.parse(JSON.stringify(o)))):this.printQueue.update(o=>(o.push(r),JSON.parse(JSON.stringify(o))))}};n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=M({type:n,selectors:[["app-home"]],decls:26,vars:7,consts:[[3,"translucent"],["slot","start"],["color","primary",4,"ngIf"],["slot","end"],["color","primary","fill","solid"],["name","print-outline"],[3,"fullscreen"],["collapse","condense"],["size","large"],[3,"material"],["color","primary"],["search-icon","barcode-outline","id","searchbar","placeholder","Barcode / EAN",3,"ngModelChange","ionInput","debounce","ngModel"],[2,"height","300px","overflow-y","scroll"],[3,"queue","material"],[3,"unqueue","material"]],template:function(e,o){e&1&&(a(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),s(3,"MDE Druck"),l(),a(4,"ion-buttons",1),C(5,_e,1,0,"ion-spinner",2),l(),a(6,"ion-buttons",3)(7,"ion-button",4),s(8),p(9,"ion-icon",5),l()()()(),a(10,"ion-content",6)(11,"ion-header",7)(12,"ion-toolbar")(13,"ion-title",8),s(14," MDE Druck 2"),l()()(),C(15,fe,1,0)(16,Ce,6,2,"ion-list")(17,xe,1,0),a(18,"ion-list")(19,"ion-item-group")(20,"ion-item-divider")(21,"ion-label"),s(22," Druckwarteschlange "),l()(),a(23,"ion-grid"),N(24,we,1,1,"app-queue-material",9,ue),l()()()()),e&2&&(x("translucent",!0),c(5),x("ngIf",o.spinning()),c(3),h("Drucken (",o.printQueue().length,")\xA0 "),c(2),x("fullscreen",!0),c(5),_(o.materials()?-1:15),c(),_(o.materials()?16:-1),c(),_(o.printQueue()?-1:17),c(7),Q(o.printQueue()))},dependencies:[G,ne,te,A,Y,me,pe,ie,R,W,K,j,J,$,U,X,O,ee,B,y,L],encapsulation:2});let t=n;return t})();export{We as HomePage};
